<html>
<body style="margin: 0px">

<canvas id="canvas">

</canvas>

<script>
    var canvas = document.getElementById('canvas');
    var context = canvas.getContext('2d');
    var cam = {x: 0, y: 0, z: -5, rotx: 0, roty: 0};
    var keys = {}

    document.body.onkeydown = (event) => {
        keys[event.key] = true;
    };

    document.body.onkeyup = (event) => {
        keys[event.key] = false;
    };

    verts = [
        [-1, 1, -1],
        [ 1, 1, -1],
        [1,  -1, -1],
        [-1, -1,  -1],
        [-1, 1, 1],
        [ 1, 1, 1],
        [1,  -1, 1],
        [-1, -1,  1]
    ];

    edges = [
        [0, 1],
        [0, 3],
        [0, 4],
        [1, 2],
        [1, 5],
        [2, 3],
        [2, 6],
        [3, 7],
        [4, 5],
        [4, 7],
        [5, 6],
        [6, 7]
    ];

    function rotate(x, y, rad) {
        s = Math.sin(rad);
        c = Math.cos(rad);
        return [x*c-y*s, y*c+x*s]
    }

    function render() {
    	requestAnimationFrame(render);

        if (keys['w']) {
            cam.z += 0.1;
        }
        if (keys['s']) {
            cam.z -= 0.1;
        }
        if (keys['d']) {
            let x, z;
            [x, z] = rotate(0.1, 0, cam.rotx);
            cam.x += x;
            cam.z += z
        }
        if (keys['a']) {
            cam.x -= 0.1;
        }
        if (keys['q']) {
            cam.rotx += 0.1;
        }
        if (keys['e']) {
            cam.rotx -= 0.1;
        }

        let xOff = canvas.width / 2;
        let yOff = canvas.height / 2;

    	context.fillStyle = '#333344';
    	context.fillRect(0, 0, canvas.width, canvas.height);

        context.fillStyle = '#BBBBFF';

    	points = verts.map(vert => {
            let x, y, z;
            [x, y, z] = vert.map(v => v);
            x -= cam.x;
            y -= cam.y;
            z -= cam.z;
            // [x, z] = rotate(x, z, cam.rotx)
            let f = 100 / (z + 5);
            x *= f;
            y *= f;
            return [x + xOff, y + yOff]
            // context.beginPath();
            // context.arc(x + xOff, y + yOff, 4, 0, 2*Math.PI);
            // context.fill();
        });

        edges.forEach(edge => {
            context.beginPath();
            let x1, y1, x2, y2;
            [x1, y1] = points[edge[0]];
            [x2, y2] = points[edge[1]];
            context.moveTo(x1, y1);
            context.lineTo(x2, y2);
            context.stroke();
        });
    };

    render();

    document.body.onresize = () => {
    	canvas.width = window.innerWidth;
    	canvas.height = window.innerHeight;
    };

    window.onload = () => {
    	canvas.width = window.innerWidth;
    	canvas.height = window.innerHeight;
    }
</script>

</body>
</html
